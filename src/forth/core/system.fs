: ? @ . ;

: +! ( value addr -- ) TUCK @ + SWAP ! ;

: VARIABLE
  CREATE HERE !
  CELL ALLOT
;

: BEGIN HERE ; IMMEDIATE

: AGAIN
  COMPILE BRANCH
  HERE - S,
; IMMEDIATE

: DO
  COMPILE SWAP
  COMPILE >R
  COMPILE >R
  HERE
; IMMEDIATE

: LOOP
  COMPILE R>
  COMPILE 1+
  COMPILE R>
  COMPILE 2DUP
  COMPILE >R
  COMPILE >R
  COMPILE <
  COMPILE 0=
  COMPILE 0BRANCH
  HERE - S,
  COMPILE R>
  COMPILE R>
  COMPILE 2DROP
; IMMEDIATE

: >MARK      ( -- addr )   HERE 0 S,  ;
: IF COMPILE 0BRANCH >MARK ; IMMEDIATE
: THEN HERE OVER - SWAP S! ; IMMEDIATE
: ELSE COMPILE BRANCH >MARK SWAP [COMPILE] THEN ; IMMEDIATE
